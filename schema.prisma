// schema.prisma

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["jsonProtocol"]
}

datasource db {
  provider          = "postgresql"
  url               = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl         = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING") // used for migrations
}

model User {
  id           Int         @id @default(autoincrement())
  name         String?
  email        String?     @unique
  address      String?
  bloodGroup   String?
  allergy      String?
  medCondition String?
  createdAt    DateTime    @default(now()) @map(name: "created_at")
  updatedAt    DateTime    @updatedAt @map(name: "updated_at")
  posts        MedRecord[]

  @@map(name: "users")
}

model Doctor {
  id             Int     @id @default(autoincrement())
  name           String?
  specialization String?
  address        String?
  profilepic     String?
}

model MedRecord {
  id         Int      @id @default(autoincrement())
  patient    User?    @relation(fields: [patientID], references: [id])
  patientID  Int?
  reportname String?
  date       DateTime @default(now())
  file       String?
}
